// BRICKS Pac by @leaskh // www.leaskh.com, i@leaskh.com
 function FindProxyForURL(url, host) { var bricks = { '0bin.net' : 1,'archive.org' : 1,'codepad.org' : 1,'cryptbin.com' : 1,'hastebin.com' : 1,'heypasteit.com' : 1,'justpaste.it' : 1,'paste2.org' : 1,'paste4btc.com' : 1,'pastebin.com' : 1,'pastee.org' : 1,'pastie.org' : 1,'slexy.org' : 1,'snipplr.com' : 1,'snipt.net' : 1,'sourceforge.net' : 1,'stnsoft.com' : 1,'termbin.com' : 1,'thesnippetapp.com' : 1,'tny.cz' : 1,'www.000webhost.com' : 1,'www.freehosting.com' : 1,'www.hpage.com' : 1,'www.ipage.com' : 1,'www.ipaste.eu' : 1,'www.snippetsource.net' : 1,'www.webs.com' : 1,'www.weebly.com' : 1, 'localhost' : 1 }; 
// see https://github.com/clowwindy/ChinaDNS/blob/master/chinadns/dnsrelay.py
 var fakeIps = { '74.125.127.102' : 1, '74.125.155.102' : 1, '74.125.39.102' : 1, '74.125.39.113' : 1, '209.85.229.138' : 1, '128.121.126.139' : 1, '159.106.121.75' : 1, '169.132.13.103' : 1, '192.67.198.6' : 1, '202.106.1.2' : 1, '202.181.7.85' : 1, '203.161.230.171' : 1, '203.98.7.65' : 1, '207.12.88.98' : 1, '208.56.31.43' : 1, '209.145.54.50' : 1, '209.220.30.174' : 1, '209.36.73.33' : 1, '211.94.66.147' : 1, '213.169.251.35' : 1, '216.221.188.182' : 1, '216.234.179.13' : 1, '243.185.187.39' : 1, '37.61.54.158' : 1, '4.36.66.178' : 1, '46.82.174.68' : 1, '59.24.3.173' : 1, '64.33.88.161' : 1, '64.33.99.47' : 1, '64.66.163.251' : 1, '65.104.202.252' : 1, '65.160.219.113' : 1, '66.45.252.237' : 1, '72.14.205.104' : 1, '72.14.205.99' : 1, '78.16.49.15' : 1, '8.7.198.45' : 1, '93.46.8.89' : 1 }; var safePorts = { 5223 : 1, 3478 : 1, 3479 : 1, 3480 : 1, 3481 : 1, 3482 : 1, 3483 : 1, 3484 : 1, 3485 : 1, 3486 : 1, 3487 : 1, 3488 : 1, 3489 : 1, 3490 : 1, 3491 : 1, 3492 : 1, 3493 : 1, 3494 : 1, 3495 : 1, 3496 : 1, 3497 : 1, 16384 : 1, 16385 : 1, 16386 : 1, 16387 : 1, 16393 : 1, 16394 : 1, 16395 : 1, 16396 : 1, 16397 : 1, 16398 : 1, 16399 : 1, 16400 : 1, 16401 : 1, 16402 : 1 }; var proxy = 'SOCKS5 127.0.0.1:8964; SOCKS 127.0.0.1:8964; DIRECT'; function testDomain(target, domains, cnRootIncluded) { var idxA = target.lastIndexOf('.'); var idxB = target.lastIndexOf('.', idxA - 1); var hasOwnProperty = Object.hasOwnProperty; var suffix = cnRootIncluded ? target.substring(idxA + 1) : ''; if (suffix === 'cn') { return true; } while (true) { if (idxB === -1) { if (hasOwnProperty.call(domains, target)) { return true; } else { return false; } } suffix = target.substring(idxB + 1); if (hasOwnProperty.call(domains, suffix)) { return true; } idxB = target.lastIndexOf('.', idxB - 1); } } if (isPlainHostName(host) || host === '127.0.0.1' || host === 'localhost') { return 'DIRECT'; } if (testDomain(host, bricks)) { return proxy; } if (safePorts[host.split(':')[1]]) { return 'DIRECT'; } var strIp = dnsResolve(host); if (!strIp) { return proxy; } if (fakeIps[strIp]) { return proxy; } return DIRECT; }
